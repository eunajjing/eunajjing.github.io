---
title: mybatis 프로시저 매핑 문제 트러블슈팅
date: 2019-01-29 16:20:18
tags:
categories: [개발공부]
---

## mybatis - 프로시저 매핑

만든 프로시저

```sql
DELIMITER //
create procedure `selectOneBoard`(IN bno int(11))
begin
    declare result int(4); 
    set result = (select count(*) from suggestion
                            where bno=bno
                            and statusCode='S02');
    if (result > 0) then
        select bno, b.mid "mid", b.title "title", b.bContent "bContent",
                DATE_FORMAT(b.writeDate,'%Y-%m-%d') "WriteDate",
                b.readCount "readCount", b.thumbNail "thumbNail",
                b.categoryCode "categoryCode", b.bDelete "bDelete" 
                s.link "link"
        from board b join suggestion s using(bno)
        where b.bDelete='0';    
    ELSE 
        SELECT bno, mid, title, bContent,
                DATE_FORMAT(writeDate,'%Y-%m-%d') WriteDate,
                readCount, thumbNail, categoryCode, bDelete
        FROM board
        WHERE bDelete='0'
        and bno = bno;
    
    end if;
end;
//
DELIMITER ;

```

`call selectOneBoard(~)`를 하면 DB 단에서는 정말 잘 실행되는데,

결과 값인 vo를 가지고 못하는 문제가 발생했다.

찾아보니 [이런 문서](https://www.tutorialspoint.com/mybatis/mybatis_stored_procedures.htm)를 발견했다.

즉 resultMap을 이용해서 받거나, 파라미터로 보내는 vo로 리턴을 받아야 한다는 것!

:<... 너모 어렵다... 나는 resultMap으로 받아냈다!