<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Page 98 | ERecord</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="일상 및 개발 공부 기록용 블로그">
<meta property="og:type" content="website">
<meta property="og:title" content="ERecord">
<meta property="og:url" content="http://eunajjing.github.io/page/98/index.html">
<meta property="og:site_name" content="ERecord">
<meta property="og:description" content="일상 및 개발 공부 기록용 블로그">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ERecord">
<meta name="twitter:description" content="일상 및 개발 공부 기록용 블로그">
  
    <link rel="alternate" href="/atom.xml" title="ERecord" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/fashion.css">
  <link rel="stylesheet" href="/css/glyphs.css">

</head>
</html>


  <body>


  


<header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="ERecord" rel="home"> ERecord </a>
            
          </h1>
          
          
            <div class="site-description">일상 및 개발 공부 기록용 블로그</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows" style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="https://www.notion.so/eunako-attr-every_day-study_hard-ebb1a09d24734280aba94018d13df0a1">About</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="https://www.notion.so/bookmarks-3b11361b4a07466f9fa0236e5f762c87">bookmark</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-2018-12-05" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/12/05/2018-12-05/">2018-12-05 수업 내용 정리</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2018/12/05/2018-12-05/" class="article-date">
	  <time datetime="2018-12-05T00:06:18.000Z" itemprop="datePublished">12월 5, 2018</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/개발공부/">개발공부</a>, <a class="article-category-link" href="/categories/개발공부/뉴딜과정/">뉴딜과정</a>
 
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Bean-컨테이너"><a href="#Bean-컨테이너" class="headerlink" title="Bean 컨테이너"></a>Bean 컨테이너</h2><blockquote>
<h2 id="SW의-용어"><a href="#SW의-용어" class="headerlink" title="SW의 용어"></a>SW의 용어</h2><h3 id="Engine"><a href="#Engine" class="headerlink" title="Engine"></a>Engine</h3><ul>
<li>일을 실행하는 역할</li>
</ul>
<h3 id="Parser"><a href="#Parser" class="headerlink" title="Parser"></a>Parser</h3><ul>
<li>해석하는 역할</li>
<li>엔진보다 협소한 의미, 실행까지 하면 엔진이라고 한다</li>
</ul>
<h3 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h3><ul>
<li>객체의 생성과 소멸을 관리</li>
</ul>
<h3 id="VM"><a href="#VM" class="headerlink" title="VM"></a>VM</h3><ul>
<li>생성과 실행과 소멸을 담당하는 역할</li>
<li>컨테이너 + 엔진의 느낌</li>
</ul>
</blockquote>
<ul>
<li><p>Bean </p>
<ul>
<li>인스턴스, 오브젝트, 객체</li>
</ul>
</li>
<li><p>의존 객체 주입이 필요</p>
<ul>
<li>생성자에 파라미터로 던져주던 것들</li>
</ul>
</li>
<li><p>IOC Container(DI Container)</p>
<ul>
<li><p>의존 객체를 주입한 빈 컨테이너<br>(IOC != DI)<br>(IOC &gt; DI)</p>
</li>
<li><p>제어의 역행이 일어난다</p>
<ul>
<li><p>메인 흐름과 별개의 이벤트 핸들러(리스너) 메서드가 실행된다</p>
</li>
<li><p>생성하지 않은 객체가 외부에서 만들어져 주입 된다</p>
<blockquote>
<h2 id="IOC의-3대-예-중-2개"><a href="#IOC의-3대-예-중-2개" class="headerlink" title="IOC의 3대 예 중 2개"></a>IOC의 3대 예 중 2개</h2><ul>
<li>이벤트 리스너</li>
<li>DI = 의존 객체 주입(생성이 아님)</li>
</ul>
</blockquote>
</li>
<li><p>DI를 쓰면 좋은 점</p>
<ul>
<li><p>의존 객체 대체가 쉽다<br>(예를 들어 지불 수단이라는 인터페이스 급의 객체를 DI해서 넣어두면, 지불 수단 인터페이스를 상속 받은 돈, 카드 등의 재화도 주입이 가능)</p>
</li>
<li><p>단위 테스트가 쉽다</p>
<p>(예를 들어 원래 과일을 가는 믹서기를 만든다고 했을 때, 믹서기를 만드는 도중 테스트를 한다고 가정하자. 과일까지 모두 조달해서 믹서기를 작동하는 구조 OR 믹서만 작동이 가능한 구조 중에 단위 테스트가 쉬운 건 후자. 테스트할 때 과일 외에도 다양한 식품을 넣어볼 수 있다.)</p>
</li>
<li><p>쓸모 없는 데이터의 생성을 최소화할 수 있다<br>(자원 낭비가 덜 함)</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Spring-IOC-Container"><a href="#Spring-IOC-Container" class="headerlink" title="Spring IOC Container"></a>Spring IOC Container</h2><blockquote>
<p>spring 공부 다시 해야할 듯…</p>
</blockquote>
<ol>
<li><p><code>dependncies</code>에 <code>Spring-context</code> 의존 설정을 해준다.<br>(maven에서 검색함)</p>
</li>
<li><p>Spring Ioc 설정 파일 추가</p>
<ul>
<li><p>xml로 설정하거나</p>
</li>
<li><p>class로 설정하는 방법 두 개</p>
<ul>
<li><p>AppConfig.java(Class) 작성</p>
<ul>
<li><p>만약 내가 만든 클래스가 아니라서, 즉 IOC Container가 자동으로 생성할 수 없는 경우 메서드를 정의하여 직접 객체를 생성해야 한다.</p>
<ul>
<li>mybatis 관련 객체의 경우가 대표적으로, sqlSessionFactory가 가 그렇다.</li>
</ul>
</li>
<li><p>SqlSessionFactory 객체를 생성하는 메서드 추가</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.eomcs.lms;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ioc Container에게 패키지 이름을 알려준다</span></span><br><span class="line"><span class="comment">// 이름을 알려주면 그 패키지를 뒤져서 @conponent가 붙은 클래스에 대해</span></span><br><span class="line"><span class="comment">// 인스턴스를 자동으로 생성</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.eomcs.lms"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Bean</span> <span class="comment">// Spring IOC Container에게 이 메서드를 호출하여 리턴 값을 보관하라고 표시하는 어노테이션</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">createSqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    String resource = <span class="string">"com/eomcs/lms/conf/mybatis-config.xml"</span>;</span><br><span class="line">    InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">    <span class="comment">// 리턴 값을 저장할 때 사용할 이름을 따로 지정하지 않으면 메서드 이름으로 저장되기에</span></span><br><span class="line">    <span class="comment">// 이런 메서드의 이름은 동사가 아닌 객체의 이름인 명사 형태로 짓는다</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이름 지정하는 방법<code>@Bean(&quot;이름&quot;)</code>은 이러하지만 잘 사용하지 않는다. </p>
</li>
<li><p>dao 클래스는 내가 만든 클래스므로, 해당 클래스 위에 객체 자동생성하도록 설정</p>
<p>이 때 당연히 인터페이스는 객체 생성이 불가하므로, 상속 받은 클래스에 어노테이션 <code>@Component</code> 이용</p>
</li>
<li><p>Spring Boot</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>xml 설정이 아닌 java class로 설정한다</li>
</ul>
</blockquote>
</li>
<li><p>Spring IOC Container 준비</p>
<ul>
<li><p>실행 클래스에 Spring IOC Container 객체 준비</p>
</li>
<li><p>실행 클래스에서 해당 소스 기술</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext iocContainer = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br></pre></td></tr></table></figure>
<p>그리고 이 소스를</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Command commandHandler = commandMap.get(command);</span><br></pre></td></tr></table></figure>
<p>이렇게 변경</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Command commandHandler = (Command) iocContainer.getBean(command);</span><br><span class="line">        <span class="comment">// 빈을 찾으면 정상 실행, 빈을 못 찾으면 예외가 발생</span></span><br><span class="line">        <span class="comment">// 때문에 if else가 아니라 try catch 처리</span></span><br></pre></td></tr></table></figure>
<p>차후에 iocContainer도 <code>close()</code> 필요</p>
<blockquote>
<h2 id="Class-정보를-보고자-할-때"><a href="#Class-정보를-보고자-할-때" class="headerlink" title="Class 정보를 보고자 할 때"></a>Class 정보를 보고자 할 때</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&gt;     Class&lt;?&gt; clazz = Class.forName(<span class="string">"com.eomcs.lms.AppConfig"</span>);</span><br><span class="line">&gt;     <span class="comment">// AppConfig 클래스가 메모리에 로딩되어 있지 않다면 로딩 후 클래스 정보 리턴</span></span><br><span class="line">&gt;     <span class="comment">// 어떤 클래스라도 상관 없이 받기 위해 제네릭 &lt;?&gt;</span></span><br><span class="line">&gt;     <span class="comment">// class가 이미 사용되는 예약어라 clazz로 객체 이름 설정이 일반적</span></span><br><span class="line">&gt;     <span class="comment">// AppConfig.class와 같다.</span></span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="comment">// Reflection 클래스 : JVM에 로딩되어 있는 있는 클래스와 메소드 정보를 읽어 올 수 있다</span></span><br><span class="line">&gt;     </span><br><span class="line">&gt;     Method[] methods = clazz.getMethods();</span><br><span class="line">&gt;     <span class="comment">// 클래스의 모든 메서드들이 들어온다</span></span><br><span class="line">&gt; </span><br><span class="line">&gt;     Constructor[] constructors = clazz.getConstructors();</span><br><span class="line">&gt;     <span class="comment">// 생성자의 정보</span></span><br><span class="line">&gt;     Class&lt;?&gt; returnType = methods[<span class="number">0</span>].getReturnType();</span><br><span class="line">&gt;     <span class="comment">// 메서드의 리턴 타입</span></span><br><span class="line">&gt;     Parameter[] params = methods[<span class="number">0</span>].getParameters();</span><br><span class="line">&gt;     <span class="comment">// 메서드에 들어가는 파라미터</span></span><br><span class="line">&gt;     </span><br><span class="line">&gt;     ApplicationContext iocContainer = <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">&gt;     <span class="comment">// 확장자(.class)가 아닌 클래스 변수명임을 기억할 것</span></span><br><span class="line">&gt;     System.out.println(iocContainer.getBeanDefinitionCount());</span><br><span class="line">&gt;     <span class="comment">// 몇 개의 객체 생성을 했는지</span></span><br><span class="line">&gt;     String[] names = iocContainer.getBeanDefinitionNames();</span><br><span class="line">&gt;     <span class="comment">// 생성된 객체들의 이름을 리턴</span></span><br><span class="line">&gt;     </span><br><span class="line">&gt;     <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">&gt;       System.out.printf(<span class="string">"%s ===&gt; %s\n"</span>, name, iocContainer.getBean(name).getClass().getName());</span><br><span class="line">&gt;       <span class="comment">// 객체 이름 ===&gt; 경로 출력됨</span></span><br><span class="line">&gt;       <span class="comment">// 객체의 이름을 지정하지 않았다면 클래스명 맨 앞 대문자를 소문자로 변경해 사용</span></span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
</li>
</ol>
<h2 id="Spring-IOC-컨테이너와-mybatis-연동"><a href="#Spring-IOC-컨테이너와-mybatis-연동" class="headerlink" title="Spring IOC 컨테이너와 mybatis 연동"></a>Spring IOC 컨테이너와 mybatis 연동</h2><ul>
<li><p><code>buid.gradle</code>에 <code>mybatis-spring</code> 의존 설정 추가</p>
</li>
<li><p>sqlSessionFactory 객체 생성</p>
<ul>
<li><p><code>mybatis-spring</code>에서 제공하는 도우미 클래스를 사용해 만드는 것으로 메서드 변경</p>
<ul>
<li>apache common-dbcp 라이브러리 추가<br>datasource 구현체(db 커넥션풀 객체)</li>
<li><code>buid.gradle</code>에 <code>commons-dbcp2</code> 의존 설정 추가</li>
</ul>
<p>기존 소스가 이런 상태에서 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">sqlSessionFactory</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  String resource = <span class="string">"com/eomcs/lms/conf/mybatis-config.xml"</span>;</span><br><span class="line">  InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이렇게 변경하고,</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    </span><br><span class="line">    SqlSessionFactoryBean factoryBean = <span class="keyword">new</span> SqlSessionFactoryBean();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// datasource 주입</span></span><br><span class="line">    factoryBean.setDataSource(dataSource);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> factoryBean.getObject();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">클래스 위에 `<span class="meta">@PropertySource</span>` 어노테이션을 더 추가해주고, 가져오는 프로퍼티 파일이 들어갈 수 있도록 `<span class="meta">@value</span>` 어노테이션도 클래스 변수 위에 기술해준다.</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line"><span class="comment">// spring ioc Container에게 프로퍼티 파일을 로딩할 것을 명령</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:/com/eomcs/lms/conf/jdbc.properties"</span>)</span><br><span class="line"><span class="comment">// 프로퍼티가 있는 위치를 가리키되, 기술하는 방식을 지켜야 한다.</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driver&#125;"</span>)</span><br><span class="line">  String jdbcDriver;</span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">  String jdbcUrl;</span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">  String jdbcUserName;</span><br><span class="line">  <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">  String jdbcPassword;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">객체 생성 메서드를 만들어준다. (basic datasource 방식)</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    BasicDataSource dataSource = <span class="keyword">new</span> BasicDataSource();</span><br><span class="line">    dataSource.setDriverClassName(jdbcDriver);</span><br><span class="line">    dataSource.setUrl(jdbcUrl);</span><br><span class="line">    dataSource.setUsername(jdbcUserName);</span><br><span class="line">    dataSource.setPassword(jdbcPassword);</span><br><span class="line">    <span class="keyword">return</span> dataSource;</span><br><span class="line">  &#125;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">이제 db 커넥션을 java 파일에서 하므로, `mybatis-config.xml`에서 중복 기술 사항을 삭제한다.</span><br><span class="line"></span><br><span class="line">- db 커넥션 풀</span><br><span class="line">- db 연결 정보를 담은 프로퍼티 파일 로딩</span><br></pre></td></tr></table></figure>
<ul>
<li><p>트랜젝션 관리자</p>
<ul>
<li><p>spring 트랜젝션 관련 라이브러리 의존 설정(<code>Spring JDBC</code>) 추가</p>
</li>
<li><p><code>AppConfig</code>에 PlatformTransactionManager를 리턴하는 메서드 구현</p>
<ul>
<li><p>이 때 이 객체의 이름은 반드시 transactionManager로 설정</p>
<ul>
<li>다른 이름으로 설정하면 트랜젝션과 관련한 다른 객체를 생성할 때 그 객체가 트랜젝션 관리자를 자동으로 찾지 못한다.</li>
</ul>
<p>생성자 메서드 소스는 다음과 같다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> PlatformTransactionManager <span class="title">platformTransactionManager</span><span class="params">(DataSource dataSource)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DataSourceTransactionManager(dataSource);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>이제 db 트랜젝션 관리 또한 java 파일에서 하므로, <code>mybatis-config.xml</code>에서 중복 기술 사항을 삭제한다.</p>
</li>
</ul>
</li>
<li><p>도메인 클래스에 별명 구현</p>
<ul>
<li><p>SqlSessionFactory를 반환하는 메서드에 다음의 설정을 세팅한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">factoryBean.setTypeAliasesPackage(<span class="string">"com.eomcs.lms.domain"</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>마찬가지로 별명 지정 또한 java 파일에서 했으므로, <code>mybatis-config.xml</code>에서 중복 기술 사항을 삭제한다.</p>
</li>
</ul>
</li>
<li><p>SQL을 보관한 XML 파일 경로 또한 java 파일에서 가능</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> SqlSessionFactory <span class="title">sqlSessionFactory</span><span class="params">(DataSource dataSource, ApplicationContext iocContainer)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    </span><br><span class="line">    SqlSessionFactoryBean factoryBean = <span class="keyword">new</span> SqlSessionFactoryBean();</span><br><span class="line">    </span><br><span class="line">        factoryBean.setMapperLocations(iocContainer.getResources(<span class="string">"classpath:/com/eomcs/lms/mapper/*Mapper.xml"</span>));</span><br><span class="line">    <span class="comment">// sql mapper 로딩</span></span><br><span class="line">    <span class="comment">// sql 파일이 있는 위치를 파라미터로 보내야 하는 상황</span></span><br><span class="line">    <span class="comment">// sql 파일의 위치 정보를 resource 객체에 담아 넘겨야 함</span></span><br><span class="line">    <span class="comment">// resource 객체는 Spring IOC Container를 통해 만들 수 있다.</span></span><br><span class="line">    <span class="comment">// Spring IOC Container 객체를 얻는 방법 : 메서드의 파라미터로 받는다.</span></span><br><span class="line">    <span class="comment">// 이 경우 ioc container 생성은 실행 클래스에서 하기에</span></span><br><span class="line">    <span class="comment">// 실행 클래스에서 해당 객체가 넘어온다.</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> factoryBean.getObject();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>mybatis-config.xml</code>가 더 이상 필요 없다</strong></p>
</li>
</ul>
<h2 id="웹-어플리케이션-이론"><a href="#웹-어플리케이션-이론" class="headerlink" title="웹 어플리케이션 이론"></a>웹 어플리케이션 이론</h2><ul>
<li>웹 브라우저는 http 프로토콜에 맞춰서 웹 서버에 요청한다.</li>
<li><p>웹 서버는 우리가 만든 프로그램을 실행해서 결과를 받아서 http 프로토콜 규칙에 맞춰 응답해야 한다.</p>
</li>
<li><p>그런데 웹서버의 역할은 프로그램을 실행하는 게 아니다. 웹서버는 정적 웹 리소스 html, css, java script, png, jpeg 등을 읽어서 웹 브라우저에게 리턴하는 게 원래 역할이다. 웹서버가 프로그램을 실행해야하는 상황이니까 프로그램을 실행할 중간 객체를 필요로 하게 된다.</p>
<blockquote>
<p>실행해야 하는 리소스(DB와 같은 것)은 동적 리소스(Dynamic Web Resource)</p>
</blockquote>
</li>
<li><p>ioc container는 웹서버의 요청이 들어오면 메서드를 호출해 프로그램을 실행시켜 리턴 값을 전달한다.</p>
</li>
<li><p>웹 서버는 웹 브라우저로 http 프로토콜 규칙에 맞춰 리턴 값을 응답한다.</p>
</li>
<li><p>웹 브라우저는 응답 받은 것에 맞춰 화면을 출력한다.</p>
</li>
</ul>
<h3 id="웹-어플리케이션이란"><a href="#웹-어플리케이션이란" class="headerlink" title="웹 어플리케이션이란"></a>웹 어플리케이션이란</h3><ul>
<li><p>웹 기반으로 프로그램 실행되는 자바 프로그램</p>
</li>
<li><p>웹 어플리케이션이 하나의 객체로 이루어진 게 아닌 만큼, 기능을 잘게 쪼개서 하나의 클래스가 하나의 기능을 수행하게끔 만들어야 한다.</p>
</li>
<li><p>웹 어플리케이션은 서버 프로그램인데 간단한 작업만을 수행한다.</p>
</li>
<li><p>때문에 서버 어플리케이션의 작은 조각이라는 의미로 접미사 let을 붙인다. </p>
<h4 id="서블릿-Servlet"><a href="#서블릿-Servlet" class="headerlink" title="서블릿(Servlet)"></a>서블릿(Servlet)</h4></li>
<li><p>웹 어플리케이션을 구성하는 요소들</p>
</li>
<li><p>작은 서버 프로그램</p>
<h4 id="서블릿-컨테이너-WAS"><a href="#서블릿-컨테이너-WAS" class="headerlink" title="서블릿 컨테이너(WAS)"></a>서블릿 컨테이너(WAS)</h4></li>
<li><p>웹 서버 상에서 실행되는 자바 컨테이너</p>
</li>
<li><p>서블릿 컨테이너의 대표적인 예는 톰캣</p>
<ul>
<li>서블릿 컨테이너는 이미 다운 받아 사용하는 것이고</li>
<li>개발자는 서블릿을 만드는 것</li>
</ul>
</li>
<li><p>웹 서버, 웹 브라우저는 종속이 아니지만(http 프로토콜 규칙 때문)</p>
</li>
<li>서블릿은 서블릿 컨테이너에 종속된다. 예를 들어 버전이 맞지 않는다면 실행되지 않는다.</li>
<li><p>서블릿 컨테이너와 서블릿이 통신할 수 있도록 규칙이 있고 이들은 인터페이스로 구성되어 있다.</p>
<ul>
<li>서블릿</li>
<li>필터</li>
<li>리스너</li>
</ul>
</li>
<li><p>규칙이 들어 있는 인터페이스들이 자동으로 들어있는 것은 JAVA EE(웹 기술와 분산 기술-EJB-, 웹 서비스 기술, 자원 관리 기술)</p>
<ul>
<li>대표적인 것 : 자바 EE 구현체<ul>
<li>웹로직</li>
<li>웹스피어(IBM 서버)</li>
<li>JBoss</li>
<li>Glasspish</li>
<li>Geronemo</li>
<li>톰캣 : EE 모두 구현이 아닌 웹 기술만 뽑아서 만든 것</li>
<li>Jeus</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="웹-어플리케이션을-구성하는-요소"><a href="#웹-어플리케이션을-구성하는-요소" class="headerlink" title="웹 어플리케이션을 구성하는 요소"></a>웹 어플리케이션을 구성하는 요소</h3><ul>
<li>서블릿</li>
<li>필터</li>
<li>리스너</li>
</ul>
<h3 id="servlet의-메서드"><a href="#servlet의-메서드" class="headerlink" title="servlet의 메서드"></a>servlet의 메서드</h3><p>인터페이스로 구현되어 있는 기본 5개의 메서드</p>
<ul>
<li>init()</li>
<li>service()</li>
<li>detory()</li>
<li>getServletInfo()</li>
<li>getServletConfig()</li>
</ul>
<p>서블릿 구현</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 어노테이션을 이용해 톰캣 서버에 서블릿이 있음을 알리고</span></span><br><span class="line"><span class="comment">// 루트 디렉토리부터 쓴 url을 매핑해준다.</span></span><br><span class="line"><span class="comment">// 톰캣 서버에 서블릿을 추가한 후 서블릿을 변경하면 일정 시간이 지난 후 리로딩 가능</span></span><br><span class="line"><span class="comment">// 추가하는 경우에만 서버 재시작 필요</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/board/list"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardListServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span></span>&#123;</span><br><span class="line"></span><br><span class="line">(<span class="number">4</span>개의 메서드 생략)</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    res.setContentType(<span class="string">"text/palin;charset=utf-8"</span>);</span><br><span class="line">    PrintWriter out = res.getWriter();</span><br><span class="line">    <span class="comment">// 클라이언트 쪽에 출력할 때 필요한 객체준비</span></span><br><span class="line">    out.println(<span class="string">"게시물 목록"</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardListServlet</span> <span class="keyword">extends</span> <span class="title">GenericServlet</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>이렇게 추상클래스 <code>GenericServlet</code>을 상속 받아도 된다. <code>GenericServlet</code>에는 <code>service</code>메서드를 제외한 메서드가 구현이 되어 있기에 <code>service</code>만 구현하면 된다.</p>
<p>또한 <code>HttpServletRequest</code>와 <code>HttpServletResponse</code>를 파라미터로 사용하기 위해 추상클래스 <code>HttpServlet</code>(<code>GenericServlet</code>을 상속 받음)을 상속 받아도 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardListServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> ServletException, IOException </span>&#123; .. &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>HttpServletRequest</code>와 <code>HttpServletResponse</code>를 파라미터로 사용할 수 있는  <code>service</code>는 <code>doget</code> 과 <code>dopost</code> 호출이 가능하다.</p>
<ul>
<li><code>httpServlet</code>은 <code>service</code> 실행 시 부모인 <code>GenericServlet</code>에 정의된 <code>service</code>메서드를 부르고, 이 메서드는 다시 <code>HttpServletRequest</code>와 <code>HttpServletResponse</code>를 파라미터로 쓰는  <code>service</code>메서드를 내부적으로 부르며 실행된다.</li>
<li><strong>서블릿 컨테이너는 바로 <code>doget</code>과 <code>dopost</code>를 직접 부르지 못한다.</strong></li>
</ul>
<h3 id="filter의-메서드"><a href="#filter의-메서드" class="headerlink" title="filter의 메서드"></a>filter의 메서드</h3><ul>
<li>init()</li>
<li>service()</li>
<li>detory()</li>
</ul>
<h3 id="listener의-메서드"><a href="#listener의-메서드" class="headerlink" title="listener의 메서드"></a>listener의 메서드</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextLoaderListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span></span>&#123;</span><br><span class="line">  <span class="comment">// 웹 어플리케이션이 시작되거나 종료될 때 호출되는 메서드를 정의한 것</span></span><br><span class="line">  </span><br><span class="line">  AnnotationConfigApplicationContext iocContainer;</span><br><span class="line">  <span class="comment">// 다른 메서드에서도 접근이 가능하도록 전역변수로 올린다.</span></span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">"웹 어플리케이션이 종료될 때 자동 호출"</span>);</span><br><span class="line">    <span class="comment">// Spring IOC Container 자원을 해제</span></span><br><span class="line">    iocContainer.close();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    System.out.println(<span class="string">"웹 어플리케이션이 시작될 때 자동으로 호출"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// AppConfig 클래스가 메모리에 로딩되어 있지 않다면,</span></span><br><span class="line">    <span class="comment">// Spring IoC 컨테이너 준비하기</span></span><br><span class="line">    iocContainer = </span><br><span class="line">        <span class="keyword">new</span> AnnotationConfigApplicationContext(AppConfig.class);</span><br><span class="line">    </span><br><span class="line">    System.out.println(iocContainer.getBeanDefinitionCount());</span><br><span class="line">    String[] names = iocContainer.getBeanDefinitionNames();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">      System.out.printf(<span class="string">"%s ===&gt; %s\n"</span>, name, </span><br><span class="line">          iocContainer.getBean(name).getClass().getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Spring IOC Container를 servlet이 사용할 수 있도록</span></span><br><span class="line">    <span class="comment">// servletContext라는 보관소에 저장</span></span><br><span class="line">    ServletContext sc = sce.getServletContext();</span><br><span class="line">    <span class="comment">// 파라미터로 들어온 ServletContextEvent를 이용해 IOC Container를 받을 준비</span></span><br><span class="line">    sc.setAttribute(<span class="string">"iocContainer"</span>, iocContainer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>WAS가 요청을 받으면 <code>service</code> 메서드가 실행되며 <code>doget</code>이나 <code>dopost</code> 실행됨</p>
</li>
<li><p>servlet 호출됨</p>
<ul>
<li><p>이 순간부터 IOC Container가 관리하는 게 아니라 관리자가 WAS로 넘어감</p>
</li>
<li><p>그런데 dao부터는 IOC Container가 관리</p>
</li>
<li><p>때문에 servlet에 IOC Container의 주소를 알려줘야 함</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc.setAttribute(<span class="string">"iocContainer"</span>, iocContainer);</span><br></pre></td></tr></table></figure>
<p>이 작업이 이루어지는 이유</p>
<p>그리고 <code>HttpServlet</code>를 상속 받은 <code>BoardListServlet</code> 소스 코드는 다음과 같다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 어노테이션을 이용해 톰캣 서버에 서블릿이 있음을 알리고</span></span><br><span class="line"><span class="comment">// 루트 디렉토리부터 쓴 url을 매핑해준다.</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/board/list"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardListServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">  ApplicationContext iocContainer;</span><br><span class="line">  BoardDao boardDao;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span>&#123;</span><br><span class="line">    <span class="comment">// 서블릿 인터페이스에 정의된 init(ServletConfig)가 먼저 호출되고, init(ServletConfig)가 init()를 호출하는 것</span></span><br><span class="line">    <span class="comment">// 톰캣이 바로 호출하는 게 아님</span></span><br><span class="line">    <span class="comment">// boardDao 객체를 꺼내기 위해 먼저 IOC Container를 꺼낸다.</span></span><br><span class="line">    ServletContext sc = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">    <span class="comment">// ServletContext는 웹 어플리케이션 당 한 개 뿐이다.</span></span><br><span class="line">    <span class="comment">// ContextLoaderListener에서 꺼낸 것과 같은 객체가 온다.</span></span><br><span class="line">     iocContainer = (ApplicationContext) sc.getAttribute(<span class="string">"iocContainer"</span>);</span><br><span class="line">    <span class="comment">// 오브젝트 자료형이 리턴되어 applicationcontext 인터페이스로 받는다</span></span><br><span class="line">    </span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">       boardDao = iocContainer.getBean(BoardDao.class);</span><br><span class="line">     &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">       e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse res)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    res.setContentType(<span class="string">"text/palin;charset=utf-8"</span>);</span><br><span class="line">    PrintWriter out = res.getWriter();</span><br><span class="line">    <span class="comment">// 클라이언트 쪽에 출력할 때 필요한 객체준비</span></span><br><span class="line">    out.println(<span class="string">"게시물 목록"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      List&lt;Board&gt; list = boardDao.findAll();</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">for</span> (Board board : list) &#123;</span><br><span class="line">        out.printf(<span class="string">"%3d, %-20s, %s, %d\n"</span>, </span><br><span class="line">            board.getNo(), </span><br><span class="line">            board.getContents(), </span><br><span class="line">            board.getCreatedDate(), </span><br><span class="line">            board.getViewCount());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>servlet에서 dao 도달</p>
</li>
<li><p>dao에서 mariaDB 도달</p>
</li>
</ul>
<h2 id="설정"><a href="#설정" class="headerlink" title="설정"></a>설정</h2><h3 id="서블릿-어플리케이션-개발에-사용할-라이브러리-추가"><a href="#서블릿-어플리케이션-개발에-사용할-라이브러리-추가" class="headerlink" title="서블릿 어플리케이션 개발에 사용할 라이브러리 추가"></a>서블릿 어플리케이션 개발에 사용할 라이브러리 추가</h3><ul>
<li><p>build.gradle에서 빌드 명령 사용이 가능할 수 있도록 설정</p>
<ul>
<li><code>eclipse</code> 대신 <code>eclipse-wtp</code> 플러그인 추가</li>
<li>웹 어플리케이션 배치 파일(<code>.war</code>)을 만들 <code>war</code> 플러그인 추가</li>
<li>단독으로 실행이 불가하므로 <code>application</code> 플러그인도 제거</li>
<li><code>mainClassName = &#39;App&#39;</code> 도 제거</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">'java'</span></span><br><span class="line">    id <span class="string">'eclipse-wtp'</span></span><br><span class="line">    id <span class="string">'war'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>servlet-api</code> 의존 설정</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">providedCompile <span class="string">group:</span> <span class="string">'javax.servlet'</span>, <span class="string">name:</span> <span class="string">'javax.servlet-api'</span>, <span class="string">version:</span> <span class="string">'4.0.1'</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>providedCompile</code> : 개발하는 동안에만 사용하겠다</li>
<li><code>compile</code> : 개발하는 동안에도 사용하고, 배포 시에도 함께 쓰겠다.</li>
</ul>
</li>
<li><p><code>src/main/webapp</code> : 웹 자원을 둘 디렉토리 생성</p>
</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/개발공부/">개발공부</a>, <a class="article-category-link" href="/categories/개발공부/뉴딜과정/">뉴딜과정</a>

      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/97/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/96/">96</a><a class="page-number" href="/page/97/">97</a><span class="page-number current">98</span><a class="page-number" href="/page/99/">99</a><a class="page-number" href="/page/100/">100</a><span class="space">&hellip;</span><a class="page-number" href="/page/120/">120</a><a class="extend next" rel="next" href="/page/99/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 72%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 36px; width: 100%;" placeholder=" Search…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/">개발공부</a><span class="category-list-count">98</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/CSS/">CSS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/GraphQL/">GraphQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/React/">React</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/javascript/">javascript</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/nodeJS/">nodeJS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/뉴딜과정/">뉴딜과정</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/몽고DB/">몽고DB</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/부스트코스/">부스트코스</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/부스트코스/웹-프로그래밍/">웹 프로그래밍</a><span class="category-list-count">10</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/안드로이드/">안드로이드</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/알고리즘-난항일지/">알고리즘 난항일지</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/우아한테크러닝-React-Typescript/">우아한테크러닝(React+Typescript)</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/개발공부/정보처리기사/">정보처리기사</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/일상/">일상</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/책/">책</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Contact Me</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
   			<li><a href="https://github.com/eunajjing" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 

   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/09/05/functional-thinking02/">함수형 사고, 전환</a></h6>
              <span>9월 5, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/08/28/heyjoyce/">개발자카 크면 무엇이 되나요?</a></h6>
              <span>8월 28, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/08/28/functional-thinking01/">함수형 사고, 왜?</a></h6>
              <span>8월 28, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/08/24/lazycon/">lazycon에 다녀왔다</a></h6>
              <span>8월 24, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/08/04/lazylab01/">첫 모각작 후기</a></h6>
              <span>8월 4, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/07/25/boostcouse-webapp-js/">웹앱 개발 - javascript, DOM</a></h6>
              <span>7월 25, 2019</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">9월 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">8월 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">7월 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">6월 2019</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">5월 2019</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">4월 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">3월 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">2월 2019</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">1월 2019</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">12월 2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">11월 2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">10월 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">9월 2018</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="https://www.notion.so/eunako-attr-every_day-study_hard-ebb1a09d24734280aba94018d13df0a1" class="mobile-nav-link">About</a>
  
    <a href="https://www.notion.so/bookmarks-3b11361b4a07466f9fa0236e5f762c87" class="mobile-nav-link">Bookmark</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 ERecord All Rights Reserved.
        
      </div>
 </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>

    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>








  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
